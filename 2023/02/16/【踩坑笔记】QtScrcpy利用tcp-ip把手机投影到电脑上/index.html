<!doctype html>
<html lang="zh"><head>
<title>【踩坑笔记】QtScrcpy利用tcp_ip把手机投影到电脑上 - Hexo-blog</title>
<meta charset="UTF-8">
<meta name="keywords" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="description" content="利用tcp&#x2F;ip把手机投影到电脑上，不需要数据线连接，利用同一个局限网，实现无线连接。">
<meta property="og:type" content="article">
<meta property="og:title" content="【踩坑笔记】QtScrcpy利用tcp_ip把手机投影到电脑上">
<meta property="og:url" content="https://rx-ted.github.io/blog/2023/02/16/%E3%80%90%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0%E3%80%91QtScrcpy%E5%88%A9%E7%94%A8tcp-ip%E6%8A%8A%E6%89%8B%E6%9C%BA%E6%8A%95%E5%BD%B1%E5%88%B0%E7%94%B5%E8%84%91%E4%B8%8A/index.html">
<meta property="og:site_name" content="Hexo-blog">
<meta property="og:description" content="利用tcp&#x2F;ip把手机投影到电脑上，不需要数据线连接，利用同一个局限网，实现无线连接。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/4a6846812352496ba7fad8e77964bf86.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/d9761453f90842fcaa1f326528d7d77f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA54eD5aSP,size_20,color_FFFFFF,t_70,g_se,x_16">
<meta property="article:published_time" content="2023-02-16T13:38:55.000Z">
<meta property="article:modified_time" content="2023-12-10T06:12:39.305Z">
<meta property="article:author" content="rx-ted">
<meta property="article:tag" content="踩坑笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/4a6846812352496ba7fad8e77964bf86.png">

<link rel="stylesheet" href="/blog/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/blog/lib/mdui_043tiny/mdui.css">


<link rel="stylesheet" href="/blog/lib/iconfont/iconfont.css?v=1702191051001">

<link rel="stylesheet" href="/blog/css/style.css?v=1702191051001">




    
        <link rel="stylesheet" href="/blog/page/custom.css?v=1702191051001">
    



<script src="/blog/lib/mdui_043tiny/mdui.js" async></script>
<script src="/blog/lib/fancybox/fancybox.umd.js" async></script>
<script src="/blog/lib/lax.min.js" async></script>


<script async src="/blog/js/app.js?v=1702191051001"></script>

 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>


<link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
<meta name="generator" content="Hexo 7.0.0"></head><body class="nexmoe mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"><a class="mdui-btn mdui-btn-icon mdui-ripple" mdui-drawer="{target: &#039;#drawer&#039;, swipe: true}" title="menu"><i class="mdui-icon nexmoefont icon-menu"></i></a><div class="mdui-toolbar-spacer"></div><a class="mdui-btn mdui-btn-icon" href="/blog/" title="rx-ted"><img src="https://rx-ted.github.io/blog/img/avatar.jpg" alt="rx-ted"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/blog/" title="rx-ted">
            <img src="https://rx-ted.github.io/blog/img/avatar.jpg" alt="rx-ted" alt="rx-ted">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>28</div>
        <div><span>标签</span>9</div>
        <div><span>分类</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/blog/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/blog/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/blog/about.html" title="关于博主">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博主
            </div>
        </a>
        
    </div>
    
    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:rx-ted.github.io" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
            </form>
         
    </div>
</div>




    
        
        <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://github.com/rx-ted/"
			target="_blank"
			mdui-tooltip="{content: 'GitHub'}"
			style="
				color: rgb(25, 23, 23);
				background-color: rgba(25, 23, 23, .1);
			"
		>
			<i
				class="nexmoefont icon-github"
			></i> </a
		><a
			class="mdui-ripple"
			href="mailto:gjy.18sui@gmail.com"
			target="_blank"
			mdui-tooltip="{content: 'Gmail'}"
			style="
				color: rgb(25, 23, 23);
				background-color: rgba(25, 23, 23, .1);
			"
		>
			<i
				class="nexmoefont icon-mail-fill"
			></i> </a
		>
	</div>
</div>

    
        
        

    
        
        
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/blog/tags/IOT/" style="font-size: 17.5px;">IOT</a> <a href="/blog/tags/Python/" style="font-size: 10px;">Python</a> <a href="/blog/tags/rt-thread%E7%A7%BB%E6%A4%8D/" style="font-size: 12.5px;">rt-thread移植</a> <a href="/blog/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a> <a href="/blog/tags/%E5%9B%BD%E6%B0%91%E6%8A%80%E6%9C%AFN32%E9%A1%B9%E7%9B%AE%E7%A7%BB%E6%A4%8D/" style="font-size: 15px;">国民技术N32项目移植</a> <a href="/blog/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" style="font-size: 20px;">嵌入式</a> <a href="/blog/tags/%E7%AE%80%E5%8E%86/" style="font-size: 10px;">简历</a> <a href="/blog/tags/%E7%BB%8F%E9%AA%8C/" style="font-size: 12.5px;">经验</a> <a href="/blog/tags/%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">踩坑笔记</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(17);
        var tags_length = parseInt(9);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

    
        
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/">2023</a><span class="archive-list-count">28</span></li></ul>
    </div>
  </div>



    
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">最新文章</h3>
    <div class="nexmoe-widget">
      <ul>
        
          <li>
            <a href="/blog/2023/07/31/DSC28034PNT-%E5%9F%BA%E4%BA%8E%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8CPWM%E8%BE%93%E5%87%BA%E4%B8%89%E8%89%B2%E7%81%AF/">DSC28034PNT-基于定时器和PWM输出三色灯</a>
          </li>
        
          <li>
            <a href="/blog/2023/07/31/DSC28034PNT-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83%E6%8E%A8%E8%8D%90%E4%BB%A5usart%E4%B8%B2%E5%8F%A3%E7%83%A7%E5%BD%95%E4%B8%8B%E8%BD%BD/">DSC28034PNT-搭建环境推荐以usart串口烧录下载</a>
          </li>
        
          <li>
            <a href="/blog/2023/07/31/%E6%97%B6%E9%97%B4%E6%98%BE%E7%A4%BA-%E5%9F%BA%E4%BA%8Essd1306%20I2C%20%E8%B0%83%E7%94%A8%E5%BC%80%E6%BA%90%E5%BA%93%20%E4%BA%8B%E5%8D%8A%E5%8A%9F%E5%80%8D/">时间显示 基于ssd1306 I2C 调用开源库 事半功倍</a>
          </li>
        
          <li>
            <a href="/blog/2023/07/29/DSC28034PNT-%E5%BC%80%E7%AE%B1%E5%B9%B6%E7%82%B9%E4%BA%AELED/">DSC28034PNT-开箱并点亮LED</a>
          </li>
        
          <li>
            <a href="/blog/2023/07/18/milkv-duo-i2c-ssd1306/">【Milk-V Duo 开发板免费体验】Linux下i2c驱动OLED ssd1306</a>
          </li>
        
      </ul>
    </div>
  </div>

    
        
   
    <div class="nexmoe-copyright">
        &copy; 2023 rx-ted
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a href="https://rx-ted.github.io/blog">仅供笔记</a>
<br><a target="_blank" href="https://rx-ted.github.io/blog/about.html">
<img src="https://rx-ted.github.io/blog/img/avatar.jpgimg/official.png" width="150px"></a>

    </div>
</div><!-- .nexmoe-drawer --></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post">
    <article>
        <div class="nexmoe-post-cover absolute" style="padding-top: NaN%;">
            <h1>
                【踩坑笔记】QtScrcpy利用tcp_ip把手机投影到电脑上
            </h1>
        </div>
        <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2023年02月16日</a>
        
                
                    
                        <a href="/blog/tags/%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0/">#踩坑笔记</a>
                        

                            
    </div>

    
            
                    
                            
</div>

            <h1 id="目的："><a href="#目的：" class="headerlink" title="目的："></a>目的：</h1><p>利用tcp&#x2F;ip把手机投影到电脑上，不需要数据线连接，利用同一个局限网，实现无线连接。<br>我找了很多资料，还是选择QtScrcpy。<br>其中原因有三：</p>
<ul>
<li>第一，学习值得学的内容；</li>
<li>第二，如何编译使用，遇到困难如何解决；</li>
<li>第三，作为笔记。</li>
</ul>
<p>QtScrcpy可以通过USB(或通过TCP&#x2F;IP)连接Android设备，并进行显示和控制。不需要root权限。<br>同时支持GNU&#x2F;Linux，Windows和MacOS三大主流桌面平台。</p>
<p>具体内容，就不再描述了，传送门：<a target="_blank" rel="noopener" href="https://github.com/barry-ran/QtScrcpy/blob/dev/README_zh.md">中文</a> <a target="_blank" rel="noopener" href="https://github.com/barry-ran/QtScrcpy/blob/dev/README.md">英文</a></p>
<p>接下来，如何下载、如何编译、如何使用。</p>
<hr>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>准备什么，首先阅读作者的README.md,其中有说明安装过程，<a target="_blank" rel="noopener" href="https://github.com/barry-ran/QtScrcpy/blob/dev/README.md#build">传送</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Build</span><br><span class="line">All the dependencies are provided and it is easy to compile.</span><br><span class="line">PC client</span><br><span class="line">1. Set up the Qt development environment on the target platform. Qt version&gt;=5.12 (use MSVC 2019 on Windows)</span><br><span class="line">2. Clone the project</span><br><span class="line">3. Open the project root directory all.pro or CMakeLists.txt with QtCreator</span><br><span class="line">4. Compile and run</span><br></pre></td></tr></table></figure>
<p>上面描述，我们需要下载一些必备的依赖软件。</p>
<ul>
<li>cmake &gt;&#x3D;3.19</li>
<li>Qt &gt;&#x3D; 5.12</li>
<li>MSVC 2019 及其以上 或者 MingW (我版本是:4.3.5)</li>
<li><pre><code>Visual Studio 或者 make
</code></pre>
</li>
</ul>
<p>缺了一个，那就不行了。至于如何安装，就不讲了。</p>
<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>下载方式很多，能下载就OK。<br>我选择git克隆方法，于是打开<strong>poewrshell</strong>这个命令行。<br>如下代码：</p>
<blockquote>
<p>按照我步骤去做，总算没错吧。</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> d:\</span><br><span class="line">mkdir tools</span><br><span class="line"><span class="built_in">cd</span> tools</span><br><span class="line">git clone https://github.com/barry<span class="literal">-ran</span>/QtScrcpy.git</span><br><span class="line"><span class="built_in">cd</span> QtScrcpy\QtScrcpy</span><br><span class="line">mkdir build </span><br><span class="line"><span class="built_in">cd</span> build</span><br></pre></td></tr></table></figure>
<p>目前位置：d:\tools\QtScrcpy\QtScrcpy\build<br>命令输出结果：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">PS</span> D:\&gt; <span class="built_in">cd</span> tools</span><br><span class="line"><span class="built_in">PS</span> D:\tools&gt; git clone https://github.com/barry<span class="literal">-ran</span>/QtScrcpy.git</span><br><span class="line">Cloning into <span class="string">&#x27;QtScrcpy&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: <span class="number">5363</span>, done.</span><br><span class="line">remote: Counting objects: <span class="number">100</span>% (<span class="number">579</span>/<span class="number">579</span>), done.</span><br><span class="line">remote: Compressing objects: <span class="number">100</span>% (<span class="number">291</span>/<span class="number">291</span>), done.</span><br><span class="line">remote: Total <span class="number">5363</span> (delta <span class="number">299</span>), reused <span class="number">460</span> (delta <span class="number">273</span>), pack<span class="literal">-reused</span> <span class="number">4784</span>Receiving objects: <span class="number">100</span>% (<span class="number">5363</span>/<span class="number">5363</span>), <span class="number">403.14</span> MiB Receiving objects: <span class="number">100</span>% (<span class="number">5363</span>/<span class="number">5363</span>), <span class="number">403.24</span> MiB | xx.<span class="number">00</span> MiB/s, done.</span><br><span class="line"></span><br><span class="line">Resolving deltas: <span class="number">100</span>% (<span class="number">3501</span>/<span class="number">3501</span>), done.</span><br><span class="line">Updating files: <span class="number">100</span>% (<span class="number">374</span>/<span class="number">374</span>), done.</span><br><span class="line"><span class="built_in">PS</span> D:\tools&gt; <span class="built_in">cd</span> .\QtScrcpy\QtScrcpy\</span><br><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy&gt; mkdir build</span><br><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy&gt; <span class="built_in">cd</span> build</span><br><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt;</span><br></pre></td></tr></table></figure>
<p>提示：下载过程中数据不时出现断开网络或者没反应的情况，换个方式下载吧。</p>
<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>编译时首先检查QT_DIR环境变量是否存在，若没有则设置<br><img src="https://img-blog.csdnimg.cn/4a6846812352496ba7fad8e77964bf86.png" alt="在这里插入图片描述"><br>如下代码:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake <span class="literal">-G</span> <span class="string">&quot;MinGW Makefiles&quot;</span> ..</span><br><span class="line"><span class="comment"># 选择MingW编译器，利用cmake编译一下.</span></span><br></pre></td></tr></table></figure>
<p>结果输出如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt; cmake <span class="literal">-G</span> <span class="string">&quot;MinGW Makefiles&quot;</span> ..</span><br><span class="line"><span class="literal">--</span> The CXX compiler identification is GNU <span class="number">8.1</span>.<span class="number">0</span></span><br><span class="line"><span class="literal">--</span> Detecting CXX compiler ABI info</span><br><span class="line"><span class="literal">--</span> Detecting CXX compiler ABI info - done</span><br><span class="line"><span class="literal">--</span> Check <span class="keyword">for</span> working CXX compiler: D:/XXXX/mingw/bin/g++.exe - skipped</span><br><span class="line"><span class="literal">--</span> Detecting CXX compile features</span><br><span class="line"><span class="literal">--</span> Detecting CXX compile features - done</span><br><span class="line"><span class="literal">--</span> [<span class="type">QtScrcpy</span>] Project QtScrcpy <span class="number">0.0</span>.<span class="number">0</span></span><br><span class="line"><span class="literal">--</span> [<span class="type">QtScrcpy</span>] CPU_ARCH:x64</span><br><span class="line"><span class="literal">--</span> [<span class="type">QtScrcpy</span>] BUILD_TYPE:RelWithDebInfo</span><br><span class="line"><span class="literal">--</span> [<span class="type">QtScrcpy</span>] C++ compiler ID is: GNU</span><br><span class="line"><span class="literal">--</span> [<span class="type">QtScrcpy</span>] <span class="built_in">Set</span> warnings as error</span><br><span class="line"><span class="literal">--</span> [<span class="type">QtScrcpy</span>] Qt version is: <span class="number">5.12</span></span><br><span class="line"><span class="literal">--</span> multi config:QC_IS_MUTIL_CONFIG</span><br><span class="line"><span class="literal">--</span> Configuring done</span><br><span class="line"><span class="literal">--</span> Generating done</span><br><span class="line"><span class="literal">--</span> Build files have been written to: D:/tools/QtScrcpy/QtScrcpy/build</span><br><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt;</span><br></pre></td></tr></table></figure>
<p>这时候在D:\tools\QtScrcpy\QtScrcpy\build上出现几个文件，其中Makefile文件，则表示可以用make命令,如下代码:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
<p>make命令后会发现有些问题，错误结果是：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt; make</span><br><span class="line">[  <span class="number">2</span>%] Automatic MOC and UIC <span class="keyword">for</span> target QtScrcpy</span><br><span class="line">[  <span class="number">2</span>%] Built target QtScrcpy_autogen</span><br><span class="line">[  <span class="number">4</span>%] Automatic RCC <span class="keyword">for</span> res/res.qrc</span><br><span class="line">Scanning dependencies of target QtScrcpy</span><br><span class="line">[  <span class="number">7</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/QtScrcpy_autogen/mocs_compilation.cpp.obj</span><br><span class="line">[  <span class="number">9</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/adb/adbprocess.cpp.obj</span><br><span class="line">[ <span class="number">12</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/device.cpp.obj</span><br><span class="line">[ <span class="number">14</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/controller.cpp.obj</span><br><span class="line">[ <span class="number">17</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/inputconvert/inputconvertbase.cpp.obj</span><br><span class="line">[ <span class="number">19</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/inputconvert/inputconvertnormal.cpp.obj</span><br><span class="line">[ <span class="number">21</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/inputconvert/inputconvertgame.cpp.obj</span><br><span class="line">[ <span class="number">24</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/inputconvert/controlmsg.cpp.obj</span><br><span class="line">[ <span class="number">26</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/inputconvert/keymap/keymap.cpp.obj</span><br><span class="line">[ <span class="number">29</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/receiver/devicemsg.cpp.obj</span><br><span class="line">[ <span class="number">31</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/controller/receiver/receiver.cpp.obj</span><br><span class="line">[ <span class="number">34</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/decoder/avframeconvert.cpp.obj</span><br><span class="line">[ <span class="number">36</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/decoder/decoder.cpp.obj</span><br><span class="line">[ <span class="number">39</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/decoder/fpscounter.cpp.obj</span><br><span class="line">[ <span class="number">41</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/decoder/videobuffer.cpp.obj</span><br><span class="line">[ <span class="number">43</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/filehandler/filehandler.cpp.obj</span><br><span class="line">[ <span class="number">46</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/recorder/recorder.cpp.obj</span><br><span class="line">[ <span class="number">48</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/render/qyuvopenglwidget.cpp.obj</span><br><span class="line">[ <span class="number">51</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/server/server.cpp.obj</span><br><span class="line">[ <span class="number">53</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/server/tcpserver.cpp.obj</span><br><span class="line">[ <span class="number">56</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/server/videosocket.cpp.obj</span><br><span class="line">[ <span class="number">58</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/stream/stream.cpp.obj</span><br><span class="line">[ <span class="number">60</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/ui/toolform.cpp.obj</span><br><span class="line">[ <span class="number">63</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/device/ui/videoform.cpp.obj</span><br><span class="line">[ <span class="number">65</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/devicemanage/devicemanage.cpp.obj</span><br><span class="line">[ <span class="number">68</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/fontawesome/iconhelper.cpp.obj</span><br><span class="line">[ <span class="number">70</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/uibase/keepratiowidget.cpp.obj</span><br><span class="line">[ <span class="number">73</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/uibase/magneticwidget.cpp.obj</span><br><span class="line">[ <span class="number">75</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/util/config.cpp.obj</span><br><span class="line">[ <span class="number">78</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/util/bufferutil.cpp.obj</span><br><span class="line">[ <span class="number">80</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/util/mousetap/mousetap.cpp.obj</span><br><span class="line">[ <span class="number">82</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/util/mousetap/winmousetap.cpp.obj</span><br><span class="line">[ <span class="number">85</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/main.cpp.obj</span><br><span class="line">[ <span class="number">87</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/dialog.cpp.obj</span><br><span class="line">[ <span class="number">90</span>%] Building RC object CMakeFiles/QtScrcpy.dir/res/QtScrcpy.rc.obj</span><br><span class="line">D:\tools\QtScrcpy\QtScrcpy\res\QtScrcpy.rc:<span class="number">1</span>:<span class="number">10</span>: fatal error: winres.h: No such file or directory</span><br><span class="line"> <span class="comment">#include &quot;winres.h&quot;</span></span><br><span class="line">          ^~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br><span class="line">D:\workers\mingw\bin\windres.exe: preprocessing failed.</span><br><span class="line">make[<span class="number">2</span>]: *** [<span class="type">CMakeFiles</span>\<span class="type">QtScrcpy.dir</span>\<span class="type">build.make</span>:<span class="number">623</span>: <span class="type">CMakeFiles</span>/<span class="type">QtScrcpy.dir</span>/<span class="type">res</span>/<span class="type">QtScrcpy.rc.obj</span>] Error <span class="number">1</span></span><br><span class="line">make[<span class="number">1</span>]: *** [<span class="type">CMakeFiles</span>\<span class="type">Makefile2</span>:<span class="number">83</span>: <span class="type">CMakeFiles</span>/<span class="type">QtScrcpy.dir</span>/<span class="type">all</span>] Error <span class="number">2</span></span><br><span class="line">make: *** [<span class="type">makefile</span>:<span class="number">90</span>: <span class="type">all</span>] Error <span class="number">2</span></span><br><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt;</span><br></pre></td></tr></table></figure>
<p>请移步看下<strong>错误1</strong>的原因分析和解决方案。</p>
<hr>
<p>做好了，接下来，如下命令:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
<p>输出结果如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt; make</span><br><span class="line">[  <span class="number">2</span>%] Automatic MOC and UIC <span class="keyword">for</span> target QtScrcpy</span><br><span class="line">[  <span class="number">2</span>%] Built target QtScrcpy_autogen</span><br><span class="line">[  <span class="number">4</span>%] Building RC object CMakeFiles/QtScrcpy.dir/res/QtScrcpy.rc.obj</span><br><span class="line">D:\workers\mingw\bin\windres.exe: D:\\tools\\QtScrcpy\\QtScrcpy\\res\\QtScrcpy.rc:<span class="number">25</span>: syntax error</span><br><span class="line">make[<span class="number">2</span>]: *** [<span class="type">CMakeFiles</span>\<span class="type">QtScrcpy.dir</span>\<span class="type">build.make</span>:<span class="number">623</span>: <span class="type">CMakeFiles</span>/<span class="type">QtScrcpy.dir</span>/<span class="type">res</span>/<span class="type">QtScrcpy.rc.obj</span>] Error <span class="number">1</span></span><br><span class="line">make[<span class="number">1</span>]: *** [<span class="type">CMakeFiles</span>\<span class="type">Makefile2</span>:<span class="number">83</span>: <span class="type">CMakeFiles</span>/<span class="type">QtScrcpy.dir</span>/<span class="type">all</span>] Error <span class="number">2</span></span><br><span class="line">make: *** [<span class="type">makefile</span>:<span class="number">90</span>: <span class="type">all</span>] Error <span class="number">2</span></span><br><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt;</span><br></pre></td></tr></table></figure>
<p>请移步看下<strong>错误2</strong>的原因分析和解决方案。</p>
<hr>
<p>做好了，接下来，如下命令:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>
<p>输出结果如下:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\tools\QtScrcpy\QtScrcpy\build&gt; make</span><br><span class="line">[  <span class="number">2</span>%] Automatic MOC and UIC <span class="keyword">for</span> target QtScrcpy</span><br><span class="line">[  <span class="number">2</span>%] Built target QtScrcpy_autogen</span><br><span class="line">Scanning dependencies of target QtScrcpy</span><br><span class="line">[  <span class="number">4</span>%] Building RC object CMakeFiles/QtScrcpy.dir/res/QtScrcpy.rc.obj</span><br><span class="line">D:\tools\QtScrcpy\QtScrcpy\res\QtScrcpy.rc:<span class="number">5</span>: warning: <span class="string">&quot;VERSION_RC_STR&quot;</span> redefined</span><br><span class="line"> <span class="comment">#define VERSION_RC_STR &quot;rx-ted&quot;</span></span><br><span class="line"></span><br><span class="line">&lt;command<span class="literal">-line</span>&gt;: note: this is the location of the previous definition</span><br><span class="line">[  <span class="number">7</span>%] Building CXX object CMakeFiles/QtScrcpy.dir/QtScrcpy_autogen/PNK5WDWK6L/qrc_res.cpp.obj</span><br><span class="line">[  <span class="number">9</span>%] Linking CXX executable D:\tools\QtScrcpy\output\x64\RelWithDebInfo\QtScrcpy.exe</span><br><span class="line">[<span class="number">100</span>%] Built target QtScrcpy</span><br></pre></td></tr></table></figure>
<p>意味着成功了，定位到 D:\tools\QtScrcpy\output\x64\RelWithDebInfo这个文件夹，并打开这个程序，是否运行成功。<br>如下截图：</p>
<p><img src="https://img-blog.csdnimg.cn/d9761453f90842fcaa1f326528d7d77f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA54eD5aSP,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<p>上面如何下载，编译，使用，我就讲完了。 不管遇到问题，学会思考，为什么会出现错误，尝试能不能独立解决这个问题，并总结一下，若时间允许的话，可以记笔记。</p>
<hr>
<h1 id="原因分析："><a href="#原因分析：" class="headerlink" title="原因分析："></a>原因分析：</h1><h2 id="错误1"><a href="#错误1" class="headerlink" title="错误1"></a>错误1</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">D:\tools\QtScrcpy\QtScrcpy\res\QtScrcpy.rc:1:10: fatal error: winres.h: No such file or directory</span><br><span class="line"> #include &quot;winres.h&quot;</span><br><span class="line">          ^~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br><span class="line">D:\workers\mingw\bin\windres.exe: preprocessing failed.</span><br><span class="line">make[2]: *** [CMakeFiles\QtScrcpy.dir\build.make:623: CMakeFiles/QtScrcpy.dir/res/QtScrcpy.rc.obj] Error 1</span><br><span class="line">make[1]: *** [CMakeFiles\Makefile2:83: CMakeFiles/QtScrcpy.dir/all] Error 2</span><br><span class="line">make: *** [makefile:90: all] Error 2</span><br></pre></td></tr></table></figure>
<p>这个错误告诉我winres.h没有这个库，只要找到winres.h源代码，然后导入库，就行了。</p>
<h2 id="错误2"><a href="#错误2" class="headerlink" title="错误2"></a>错误2</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PS D:\tools\QtScrcpy\QtScrcpy\build&gt; make</span><br><span class="line">[  2%] Automatic MOC and UIC for target QtScrcpy</span><br><span class="line">[  2%] Built target QtScrcpy_autogen</span><br><span class="line">[  4%] Building RC object CMakeFiles/QtScrcpy.dir/res/QtScrcpy.rc.obj</span><br><span class="line">D:\workers\mingw\bin\windres.exe: D:\\tools\\QtScrcpy\\QtScrcpy\\res\\QtScrcpy.rc:25: syntax error</span><br><span class="line">make[2]: *** [CMakeFiles\QtScrcpy.dir\build.make:623: CMakeFiles/QtScrcpy.dir/res/QtScrcpy.rc.obj] Error 1</span><br><span class="line">make[1]: *** [CMakeFiles\Makefile2:83: CMakeFiles/QtScrcpy.dir/all] Error 2</span><br><span class="line">make: *** [makefile:90: all] Error 2</span><br></pre></td></tr></table></figure>
<p>这个是语法错误，要么注释，要么修改winres.h源代码。</p>
<hr>
<h1 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h1><h2 id="解决错误1"><a href="#解决错误1" class="headerlink" title="解决错误1"></a>解决错误1</h2><p>D:\tools\QtScrcpy\QtScrcpy\res\QtScrcpy.rc:1:10到这行就错了，说明附近没有winres.h,那么我们只要在D:\tools\QtScrcpy\QtScrcpy\res上新建winres.h就行了，如下代码:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This is a part of the Microsoft Foundation Classes C++ library.</span></span><br><span class="line"><span class="comment">// Copyright (C) 1992-1999 Microsoft Corporation</span></span><br><span class="line"><span class="comment">// All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This source code is only intended as a supplement to the</span></span><br><span class="line"><span class="comment">// Microsoft Foundation Classes Reference and related</span></span><br><span class="line"><span class="comment">// electronic documentation provided with the library.</span></span><br><span class="line"><span class="comment">// See these sources for detailed information regarding the</span></span><br><span class="line"><span class="comment">// Microsoft Foundation Classes product.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// winres.h - Windows resource definitions</span></span><br><span class="line"><span class="comment">//  extracted from WINUSER.H and COMMCTRL.H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _AFX_MINREBUILD</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> component(minrebuild, off)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VS_VERSION_INFO     1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> APSTUDIO_INVOKED</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> APSTUDIO_HIDDEN_SYMBOLS <span class="comment">// Ignore following symbols</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WINVER</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WINVER 0x0400   <span class="comment">// default to Windows Version 4.0</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;winresrc.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _MAC</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DS_WINDOWSUI    0x8000L</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// operation messages sent to DLGINIT</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LB_ADDSTRING    (WM_USER+1)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CB_ADDSTRING    (WM_USER+3)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> APSTUDIO_INVOKED</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> APSTUDIO_HIDDEN_SYMBOLS</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> IDC_STATIC</span></span><br><span class="line"><span class="meta">#<span class="keyword">undef</span> IDC_STATIC</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IDC_STATIC      (-1)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _AFX_MINREBUILD</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> component(minrebuild, on)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="解决错误2"><a href="#解决错误2" class="headerlink" title="解决错误2"></a>解决错误2</h2><p> D:\tools\QtScrcpy\QtScrcpy\res\QtScrcpy.rc:25: syntax error</p>
<blockquote>
<p>方法1</p>
</blockquote>
<p>打开QtScrcpy.rc这个文件，然后注释一下。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;winres.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">IDI_ICON1       ICON      <span class="string">&quot;QtScrcpy.ico&quot;</span></span><br><span class="line"><span class="comment">// GB2312编码的话，在中文系统上打包FileDescription可以显示中文</span></span><br><span class="line"><span class="comment">// 在github action（英文系统）打包后FileDescription是乱码，utf8编码也不行。。</span></span><br><span class="line">VS_VERSION_INFO VERSIONINFO</span><br><span class="line"> FILEVERSION VERSION_MAJOR,VERSION_MINOR,VERSION_PATCH</span><br><span class="line"> PRODUCTVERSION VERSION_MAJOR,VERSION_MINOR,VERSION_PATCH</span><br><span class="line"> FILEFLAGSMASK <span class="number">0x3f</span>L</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _DEBUG</span></span><br><span class="line"> FILEFLAGS <span class="number">0x1</span>L</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"> FILEFLAGS <span class="number">0x0</span>L</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> FILEOS <span class="number">0x40004</span>L</span><br><span class="line"> FILETYPE <span class="number">0x1</span>L</span><br><span class="line"> FILESUBTYPE <span class="number">0x0</span>L</span><br><span class="line">BEGIN</span><br><span class="line">    BLOCK <span class="string">&quot;StringFileInfo&quot;</span></span><br><span class="line">    BEGIN</span><br><span class="line">        BLOCK <span class="string">&quot;080404b0&quot;</span></span><br><span class="line">        BEGIN</span><br><span class="line">            VALUE <span class="string">&quot;CompanyName&quot;</span>, <span class="string">&quot;RanKun&quot;</span></span><br><span class="line">            VALUE <span class="string">&quot;FileDescription&quot;</span>, <span class="string">&quot;Android real-time display control software&quot;</span></span><br><span class="line">            <span class="comment">// VALUE &quot;FileVersion&quot;, VERSION_RC_STR</span></span><br><span class="line">            VALUE <span class="string">&quot;LegalCopyright&quot;</span>, <span class="string">&quot;Copyright (C) RanKun 2018-2038. All rights reserved.&quot;</span></span><br><span class="line">            VALUE <span class="string">&quot;ProductName&quot;</span>, <span class="string">&quot;QtScrcpy&quot;</span></span><br><span class="line">            <span class="comment">// VALUE &quot;ProductVersion&quot;, VERSION_RC_STR</span></span><br><span class="line">        END</span><br><span class="line">    END</span><br><span class="line">    BLOCK <span class="string">&quot;VarFileInfo&quot;</span></span><br><span class="line">    BEGIN</span><br><span class="line">        VALUE <span class="string">&quot;Translation&quot;</span>, <span class="number">0x804</span>, <span class="number">1200</span></span><br><span class="line">    END</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法2</p>
</blockquote>
<p>知道VERSION_RC_STR没有被定义，我们只要重新定义就行了。<br>打开QtScrcpy.rc这个文件，然后修改一下。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;winres.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VERSION_RC_STR <span class="string">&quot;rx-ted&quot;</span></span></span><br><span class="line"></span><br><span class="line">IDI_ICON1       ICON      <span class="string">&quot;QtScrcpy.ico&quot;</span></span><br><span class="line"><span class="comment">// GB2312编码的话，在中文系统上打包FileDescription可以显示中文</span></span><br><span class="line"><span class="comment">// 在github action（英文系统）打包后FileDescription是乱码，utf8编码也不行。。</span></span><br><span class="line">VS_VERSION_INFO VERSIONINFO</span><br><span class="line"> FILEVERSION VERSION_MAJOR,VERSION_MINOR,VERSION_PATCH</span><br><span class="line"> PRODUCTVERSION VERSION_MAJOR,VERSION_MINOR,VERSION_PATCH</span><br><span class="line"> FILEFLAGSMASK <span class="number">0x3f</span>L</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _DEBUG</span></span><br><span class="line"> FILEFLAGS <span class="number">0x1</span>L</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"> FILEFLAGS <span class="number">0x0</span>L</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"> FILEOS <span class="number">0x40004</span>L</span><br><span class="line"> FILETYPE <span class="number">0x1</span>L</span><br><span class="line"> FILESUBTYPE <span class="number">0x0</span>L</span><br><span class="line">BEGIN</span><br><span class="line">    BLOCK <span class="string">&quot;StringFileInfo&quot;</span></span><br><span class="line">    BEGIN</span><br><span class="line">        BLOCK <span class="string">&quot;080404b0&quot;</span></span><br><span class="line">        BEGIN</span><br><span class="line">            VALUE <span class="string">&quot;CompanyName&quot;</span>, <span class="string">&quot;RanKun&quot;</span></span><br><span class="line">            VALUE <span class="string">&quot;FileDescription&quot;</span>, <span class="string">&quot;Android real-time display control software&quot;</span></span><br><span class="line">            VALUE <span class="string">&quot;FileVersion&quot;</span>, VERSION_RC_STR</span><br><span class="line">            VALUE <span class="string">&quot;LegalCopyright&quot;</span>, <span class="string">&quot;Copyright (C) RanKun 2018-2038. All rights reserved.&quot;</span></span><br><span class="line">            VALUE <span class="string">&quot;ProductName&quot;</span>, <span class="string">&quot;QtScrcpy&quot;</span></span><br><span class="line">            VALUE <span class="string">&quot;ProductVersion&quot;</span>, VERSION_RC_STR</span><br><span class="line">        END</span><br><span class="line">    END</span><br><span class="line">    BLOCK <span class="string">&quot;VarFileInfo&quot;</span></span><br><span class="line">    BEGIN</span><br><span class="line">        VALUE <span class="string">&quot;Translation&quot;</span>, <span class="number">0x804</span>, <span class="number">1200</span></span><br><span class="line">    END</span><br><span class="line">END</span><br></pre></td></tr></table></figure>


<hr>

                <p><img src="https://rx-ted.github.io/blog/img/official.png" loading="lazy"></p>

    </article>

    
        
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>rx-ted<br>
        <strong>本文链接：</strong><a href="https://rx-ted.github.io/blog/2023/02/16/%E3%80%90%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0%E3%80%91QtScrcpy%E5%88%A9%E7%94%A8tcp-ip%E6%8A%8A%E6%89%8B%E6%9C%BA%E6%8A%95%E5%BD%B1%E5%88%B0%E7%94%B5%E8%84%91%E4%B8%8A/" title="https:&#x2F;&#x2F;rx-ted.github.io&#x2F;blog&#x2F;2023&#x2F;02&#x2F;16&#x2F;%E3%80%90%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0%E3%80%91QtScrcpy%E5%88%A9%E7%94%A8tcp-ip%E6%8A%8A%E6%89%8B%E6%9C%BA%E6%8A%95%E5%BD%B1%E5%88%B0%E7%94%B5%E8%84%91%E4%B8%8A&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;rx-ted.github.io&#x2F;blog&#x2F;2023&#x2F;02&#x2F;16&#x2F;%E3%80%90%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0%E3%80%91QtScrcpy%E5%88%A9%E7%94%A8tcp-ip%E6%8A%8A%E6%89%8B%E6%9C%BA%E6%8A%95%E5%BD%B1%E5%88%B0%E7%94%B5%E8%84%91%E4%B8%8A&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

        
    </div>


            

                <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/blog/tags/%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0/" rel="tag">踩坑笔记</a>
    
</div>

                    
                        <script async src="/blog/js/copy-codeblock.js?v=1702191050579"></script>
                            

                                
                                    <div class="nexmoe-post-footer">
                                        
                                    </div>
                                    
</div></div><div class="nexmoe-post-right">    <div class="nexmoe-fixed">
        <div class="nexmoe-tool">

            

            
            
            <button class="mdui-fab catalog" style="overflow:unset;">
                <i class="nexmoefont icon-i-catalog"></i>
                <div class="nexmoe-toc">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">目的：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">准备</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD"><span class="toc-number">3.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E8%AF%91"><span class="toc-number">4.</span> <span class="toc-text">编译</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90%EF%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">原因分析：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF1"><span class="toc-number">5.1.</span> <span class="toc-text">错误1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF2"><span class="toc-number">5.2.</span> <span class="toc-text">错误2</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A"><span class="toc-number">6.</span> <span class="toc-text">解决方案：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E9%94%99%E8%AF%AF1"><span class="toc-number">6.1.</span> <span class="toc-text">解决错误1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E9%94%99%E8%AF%AF2"><span class="toc-number">6.2.</span> <span class="toc-text">解决错误2</span></a></li></ol></li></ol>
                </div>
            </button>
            

            

            <a href="#nexmoe-content" class="backtop toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
        </div>
    </div>
</div></div><div id="nexmoe-footer"><!--!--></div><div id="nexmoe-search-space"><div class="search-container"><div class="search-header"><div class="search-input-container"><input class="search-input" type="text" placeholder="搜索" onInput="sinput();"></div><a class="search-close" onclick="sclose();">×</a></div><div class="search-body"></div></div></div><div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2058306854838448" crossorigin="anonymous"></script>
</div></body></html>